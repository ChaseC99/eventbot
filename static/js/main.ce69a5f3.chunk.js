(this.webpackJsonpeventbot=this.webpackJsonpeventbot||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(35),o=n.n(r),s=(n(41),n(3)),i=(n(42),n(43),n(0));var u=function(e){var t=e.team,n=e.onLogout;return Object(i.jsxs)("div",{children:[t.name,Object(i.jsx)("button",{onClick:n,children:"Log Out"})]})};n(45);var l=function(e){var t=e.channels,n=e.slackClient,a=Object(c.useState)(""),r=Object(s.a)(a,2),o=r[0],u=r[1],l=Object(c.useState)(t[0].id),j=Object(s.a)(l,2),b=j[0],h=j[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Send message"}),Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n.chat.postMessage({text:o,channel:b}).catch((function(e){alert("Unable to post message. Review the error message in the console."),console.error(e,{channel:b})})),u("")},children:[Object(i.jsx)("select",{value:b,onChange:function(e){h(e.target.value)},children:t.map((function(e,t){return Object(i.jsx)("option",{value:e.id,children:e.name},t)}))}),Object(i.jsx)("input",{type:"text",value:o,onChange:function(e){u(e.target.value)}}),Object(i.jsx)("input",{type:"submit"})]})]})},j=n(5),b=n.n(j),h=n(15),m=n(36),f=function(){var e=Object(m.a)(b.a.mark((function e(t){var n,c,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.auth.test().catch((function(e){return Promise.reject("Invalid token: '".concat(t.token,"'"))}));case 2:return e.next=4,Promise.all([t.conversations.list().then((function(e){return{channels:e.channels.map((function(e){return{id:e.id,name:e.name}})).sort((function(e,t){return e.name>t.name?1:-1}))}})),t.team.info().then((function(e){return{team:{name:e.team.name,icon:e.team.icon.image_230}}}))]);case 4:return n=e.sent,c=Object(s.a)(n,2),a=c[0],r=c[1],e.abrupt("return",Object(h.a)(Object(h.a)({},a),r));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=n(47).WebClient;var d=function(){var e=Object(c.useState)(localStorage.slackToken),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),o=Object(s.a)(r,2),j=o[0],b=o[1];Object(c.useEffect)((function(){n?f(h).then((function(e){b(e),localStorage.setItem("slackToken",n)})).catch((function(e){a(),alert(e)})):localStorage.removeItem("slackToken")}),[n]);var h=new O(n);return Object(i.jsxs)("div",{className:"App",children:[!n&&Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Enter Slack Token"}),Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(e.target[0].value)},children:[Object(i.jsx)("input",{type:"password"}),Object(i.jsx)("input",{type:"submit"})]})]}),j&&Object(i.jsxs)("div",{children:[Object(i.jsx)(u,{team:j.team,onLogout:function(){a(),b()}}),Object(i.jsx)(l,{channels:j.channels,slackClient:h})]})]})};o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(d,{})}),document.getElementById("root"))},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.ce69a5f3.chunk.js.map